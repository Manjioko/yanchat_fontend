"use strict";(self["webpackChunkyanchat"]=self["webpackChunkyanchat"]||[]).push([[575],{2358:function(e,t,n){n.d(t,{$J:function(){return r},RU:function(){return o},uv:function(){return u},wX:function(){return c}});var a=n(7823);function u(e){return(0,a.W)({method:"post",url:"/isUseMd",data:e})}function c(e){return(0,a.W)({method:"post",url:"/uploadAvatar",data:e})}function o(e){return(0,a.W)({method:"post",url:"/changeNickName",data:e})}function r(e){return(0,a.W)({method:"post",url:"/getFriends",data:e})}},5575:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(3744),u=(n(1758),n(172),n(3396)),c=n(4870),o=n(2776),r=n(2578),s=n(2358),i=n(3625),l=n(5187),d=n(4578),f=n(2483),v=n(5679);const p={class:"nick"},h={class:"nick-top"};var m=(0,u.aZ)({__name:"editNick",setup(e){const t=(0,o.O)(),{userInfo:n}=(0,r.Jk)(t),m=(0,c.iH)(n.value.user),_=sessionStorage.getItem("user_id"),k=(0,c.iH)("");async function g(){if(console.log("user_info.value -> ",n.value),!k.value)return console.log("昵称为空");const[e,t]=await(0,i.Z)(s.RU({nick_name:k.value,phone_number:n.value.phone_number}));if(e)d.z8.error("修改昵称失败");else if(200===t.status&&"err"!==t.data){(0,d.z8)({message:"昵称修改成功",type:"success"}),m.value=k.value,k.value="";const[e,t]=await(0,i.Z)(s.$J({user_id:_||"",get_user_info:!0}));if(e)return;Z(t.data)}}function Z(e){n.value=e,(0,l.ps)(e),setTimeout((()=>{v.Z.replace("/chat")}),2e3)}function w(){v.Z.replace("/chat")}return(0,f.iS)((()=>!0)),(e,t)=>{const n=a.EZ;return(0,u.wg)(),(0,u.iD)("div",p,[(0,u._)("div",h,[(0,u.Wm)(n,{class:"nick-input",placeholder:m.value,modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e)},null,8,["placeholder","modelValue"])]),(0,u._)("div",{class:"nick-footer"},[(0,u._)("div",{class:"text cancel-text",onClick:w},"取消"),(0,u._)("div",{class:"text save-text",onClick:g},"保存")])])}}}),_=n(89);const k=(0,_.Z)(m,[["__scopeId","data-v-58b8e9c9"]]);var g=k},1758:function(){},172:function(e,t,n){n(1758)}}]);
//# sourceMappingURL=575.fb14abc4.js.map
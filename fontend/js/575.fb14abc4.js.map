{"version":3,"file":"js/575.fb14abc4.js","mappings":"oOAOM,SAAUA,EAAkBC,GAC9B,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,OAAQ,OACRC,IAAK,WACLH,QAER,CAGM,SAAUI,EAAUJ,GACtB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,OAAQ,OACRC,IAAK,gBACLH,QAER,CAOM,SAAUK,EAAaL,GACzB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,OAAQ,OACRC,IAAK,kBACLH,QAER,CAOM,SAAUM,EAAWN,GACvB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,OAAQ,OACRC,IAAK,cACLH,QAER,C,uMC9CA,MACMO,EAAa,CACjBC,MAAO,QAEHC,EAAa,CACjBD,MAAO,YAWT,OAA4B,QAAiB,CAC3CE,OAAQ,WACR,KAAAC,CAAMC,GACJ,MAAMC,GAAmB,UAEvBC,SAAUC,IACR,QAAYF,GACVG,GAAc,QAAID,EAAUE,MAAMC,MAClCC,EAAUC,eAAeC,QAAQ,WAEjCC,GAAW,QAAI,IACrBC,eAAelB,IAEb,GADAmB,QAAQC,IAAI,sBAAuBV,EAAUE,QACxCK,EAASL,MAAO,OAAOO,QAAQC,IAAI,QACxC,MAAOC,EAAKC,SAAa,OAAG,KAAiB,CAC3CC,UAAWN,EAASL,MACpBY,aAAcd,EAAUE,MAAMY,gBAEhC,GAAIH,EACF,KAAUI,MAAM,eAGlB,GAAmB,MAAfH,EAAII,QAA+B,QAAbJ,EAAI3B,KAAgB,EAC5C,QAAU,CACRgC,QAAS,SACTC,KAAM,YAERjB,EAAYC,MAAQK,EAASL,MAC7BK,EAASL,MAAQ,GACjB,MAAOS,EAAKC,SAAa,OAAG,KAAe,CACzCR,QAASA,GAAW,GACpBe,eAAe,KAEjB,GAAIR,EAAK,OACTS,EAAqBR,EAAI3B,KAC3B,CACF,CACA,SAASmC,EAAqBC,GAC5BrB,EAAUE,MAAQmB,GAClB,QAAYA,GACZC,YAAW,KACTC,EAAA,EAAOC,QAAQ,QAAQ,GACtB,IACL,CACA,SAASC,IACPF,EAAA,EAAOC,QAAQ,QACjB,CAIA,OAHA,SAAmB,KACV,IAEF,CAACE,EAAMC,KACZ,MAAMC,EAAsB,KAC5B,OAAO,WAAc,QAAoB,MAAOpC,EAAY,EAAC,IAAAqC,GAAoB,MAAOnC,EAAY,EAAC,QAAakC,EAAqB,CACrInC,MAAO,aACPQ,YAAaA,EAAYC,MACzB4B,WAAYvB,EAASL,MACrB,sBAAuByB,EAAO,KAAOA,EAAO,GAAKI,GAAUxB,EAASL,MAAQ6B,IAC3E,KAAM,EAAG,CAAC,cAAe,kBAAkB,IAAAF,GAAoB,MAAO,CACvEpC,MAAO,eACN,EAAC,IAAAoC,GAAoB,MAAO,CAC7BpC,MAAO,mBACPuC,QAASP,GACR,OAAO,IAAAI,GAAoB,MAAO,CACnCpC,MAAO,iBACPuC,QAAS1C,GACR,SAAS,CAEhB,I,QC/EF,MAAM2C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://yanchat/./src/components/appSetting/api/index.ts","webpack://yanchat/./src/components/mobileSetting/components/editNick.vue","webpack://yanchat/./src/components/mobileSetting/components/editNick.vue?9991"],"sourcesContent":["import { request } from \"@/utils/request\"\n\n// 获取 markdown 设置状态\ninterface GetMarkDownStatus_Inter {\n    user_id: string\n    is_use_md: boolean\n}\nexport function getMarkDownStatus(data: GetMarkDownStatus_Inter) {\n    return request({\n        method: 'post',\n        url: '/isUseMd',\n        data\n    })\n}\n\n// 获取头像\nexport function getAvatar(data: FormData) {\n    return request({\n        method: 'post',\n        url: '/uploadAvatar',\n        data\n    })\n}\n\n// 保存昵称\ninterface SaveNickName_Inter {\n    phone_number: string\n    nick_name: string\n}\nexport function saveNickName(data: SaveNickName_Inter) {\n    return request({\n        method: 'post',\n        url: '/changeNickName',\n        data\n    })\n}\n\n// 获取好友列表\ninterface GetFriends_Inter {\n    user_id: string,\n    get_user_info: boolean\n}\nexport function getFriends(data: GetFriends_Inter) {\n    return request({\n        method: 'post',\n        url: '/getFriends',\n        data\n    })\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-58b8e9c9\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"nick\"\n};\nconst _hoisted_2 = {\n  class: \"nick-top\"\n};\nimport { ref } from 'vue';\nimport { FriendsListStore } from '../../friendsList/store';\nimport { storeToRefs } from 'pinia';\nimport * as API from '../../appSetting/api';\nimport to from 'await-to-js';\nimport { setUserInfo } from '@/view/Main/Methods/userInfoOperator';\nimport { ElMessage } from 'element-plus';\nimport { onBeforeRouteLeave } from 'vue-router';\nimport router from '@/router/router';\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'editNick',\n  setup(__props) {\n    const friendsListStore = FriendsListStore();\n    const {\n      userInfo: user_info\n    } = storeToRefs(friendsListStore);\n    const placeholder = ref(user_info.value.user);\n    const user_id = sessionStorage.getItem('user_id');\n    // 保存昵称\n    const nickName = ref('');\n    async function saveNickName() {\n      console.log('user_info.value -> ', user_info.value);\n      if (!nickName.value) return console.log('昵称为空');\n      const [err, res] = await to(API.saveNickName({\n        nick_name: nickName.value,\n        phone_number: user_info.value.phone_number\n      }));\n      if (err) {\n        ElMessage.error('修改昵称失败');\n        return;\n      }\n      if (res.status === 200 && res.data !== 'err') {\n        ElMessage({\n          message: '昵称修改成功',\n          type: 'success'\n        });\n        placeholder.value = nickName.value;\n        nickName.value = '';\n        const [err, res] = await to(API.getFriends({\n          user_id: user_id || '',\n          get_user_info: true\n        }));\n        if (err) return;\n        handleNickNameChange(res.data);\n      }\n    }\n    function handleNickNameChange(fri) {\n      user_info.value = fri;\n      setUserInfo(fri);\n      setTimeout(() => {\n        router.replace('/chat');\n      }, 2000);\n    }\n    function handleClose() {\n      router.replace('/chat');\n    }\n    onBeforeRouteLeave(() => {\n      return true;\n    });\n    return (_ctx, _cache) => {\n      const _component_el_input = _resolveComponent(\"el-input\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_input, {\n        class: \"nick-input\",\n        placeholder: placeholder.value,\n        modelValue: nickName.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => nickName.value = $event)\n      }, null, 8, [\"placeholder\", \"modelValue\"])]), _createElementVNode(\"div\", {\n        class: \"nick-footer\"\n      }, [_createElementVNode(\"div\", {\n        class: \"text cancel-text\",\n        onClick: handleClose\n      }, \"取消\"), _createElementVNode(\"div\", {\n        class: \"text save-text\",\n        onClick: saveNickName\n      }, \"保存\")])]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./editNick.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./editNick.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./editNick.vue?vue&type=style&index=0&id=58b8e9c9&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58b8e9c9\"]])\n\nexport default __exports__"],"names":["getMarkDownStatus","data","request","method","url","getAvatar","saveNickName","getFriends","_hoisted_1","class","_hoisted_2","__name","setup","__props","friendsListStore","userInfo","user_info","placeholder","value","user","user_id","sessionStorage","getItem","nickName","async","console","log","err","res","nick_name","phone_number","error","status","message","type","get_user_info","handleNickNameChange","fri","setTimeout","router","replace","handleClose","_ctx","_cache","_component_el_input","_","modelValue","$event","onClick","__exports__"],"sourceRoot":""}